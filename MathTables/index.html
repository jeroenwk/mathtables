<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Math Tables</title>
<style>@font-face{font-family:'Bangers';font-style:normal;font-weight:400;font-display:swap;src:url('data:font/woff2;base64,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') format('woff2');}</style>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden;background:#0f0f1a}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  color:#f0f0ff;
  overscroll-behavior:none;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  -webkit-user-select:none;
}
:root{
  --c-bg:#0f0f1a;
  --c-surface:#1e1e32;
  --c-surface2:#2a2a45;
  --c-surface3:#353560;
  --c-accent:#6c63ff;
  --c-accent2:#ff6584;
  --c-success:#43e97b;
  --c-warning:#f9a825;
  --c-danger:#ff5252;
  --c-text:#f0f0ff;
  --c-text-dim:#8888aa;
  --c-numpad:#2d2d50;
  --c-numpad-h:#6c63ff;
  --radius-sm:8px;
  --radius-md:16px;
  --radius-lg:24px;
  --shadow:0 8px 32px rgba(0,0,0,0.4);
  --shadow-glow:0 0 20px rgba(108,99,255,0.4);
}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
#app{
  position:fixed;inset:0;
  display:flex;flex-direction:column;
  padding-top:env(safe-area-inset-top);
  padding-bottom:env(safe-area-inset-bottom);
  overflow:hidden;
}
.screen{
  flex:1;display:flex;flex-direction:column;
  overflow-y:auto;overflow-x:hidden;
  -webkit-overflow-scrolling:touch;
  padding:16px;
  gap:12px;
}
.screen-header{
  display:flex;align-items:center;gap:10px;
  min-height:44px;
  flex-shrink:0;
}
.btn-back{
  width:44px;height:44px;
  display:flex;align-items:center;justify-content:center;
  background:var(--c-surface2);
  border-radius:50%;border:none;cursor:pointer;
  font-size:1.2rem;color:var(--c-text);
  flex-shrink:0;
  touch-action:manipulation;
}
.btn-back:active{transform:scale(0.9)}

/* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
.card{
  background:var(--c-surface);
  border-radius:var(--radius-md);
  padding:16px;
  box-shadow:var(--shadow);
}
.card-sm{padding:12px}

/* ‚îÄ‚îÄ LANG FLAGS ‚îÄ‚îÄ */
.lang-bar{
  display:flex;gap:8px;
  flex-shrink:0;
}
.lang-btn{
  font-size:1.6rem;line-height:1;
  background:none;border:none;cursor:pointer;
  padding:4px 6px;border-radius:8px;
  touch-action:manipulation;
  transition:transform 0.15s;
}
.lang-btn.active{
  background:var(--c-surface2);
  transform:scale(1.2);
}
.lang-btn:active{transform:scale(0.9)}

/* ‚îÄ‚îÄ HOME SCREEN ‚îÄ‚îÄ */
.home-title{
  font-family:'Bangers',cursive;
  font-size:2rem;letter-spacing:0.05em;
  color:#ff8c00;
  margin-left:auto;
}
.user-list{display:flex;flex-direction:column;gap:10px}
.user-card{
  display:flex;align-items:center;gap:12px;
  padding:14px 16px;
  background:var(--c-surface);
  border-radius:var(--radius-md);
  border:2px solid var(--c-surface3);
  touch-action:manipulation;
}
.btn-play-user{
  padding:8px 14px;
  background:#2ecc71;
  border:none;border-radius:var(--radius-sm);
  color:#fff;font-size:0.9rem;font-weight:800;
  cursor:pointer;letter-spacing:0.03em;
  touch-action:manipulation;
  box-shadow:0 2px 8px rgba(46,204,113,0.4);
  transition:transform 0.15s,opacity 0.15s;
  white-space:nowrap;
}
.btn-play-user:active{transform:scale(0.93);opacity:0.9}
.user-avatar{font-size:2rem;line-height:1;flex-shrink:0}
.user-info{flex:1;min-width:0}
.user-name{font-size:1rem;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.user-score{font-size:0.85rem;color:var(--c-text-dim)}
.user-stars{color:#f9a825;font-size:0.9rem;letter-spacing:1px}
.user-actions{display:flex;gap:8px;flex-shrink:0}
.btn-icon{
  width:38px;height:38px;
  display:flex;align-items:center;justify-content:center;
  background:var(--c-surface2);
  border-radius:50%;border:none;cursor:pointer;
  font-size:1rem;color:var(--c-text-dim);
  touch-action:manipulation;
  transition:color 0.2s,background 0.2s;
}
.btn-icon:active{background:var(--c-accent);color:#fff}
.btn-stats{
  padding:8px 14px;
  background:var(--c-accent);color:#fff;
  border:none;border-radius:var(--radius-sm);cursor:pointer;
  font-size:0.85rem;font-weight:700;
  touch-action:manipulation;
  transition:transform 0.15s,opacity 0.15s;
  white-space:nowrap;
}
.btn-stats:active{transform:scale(0.93);opacity:0.9}
.btn-add{
  display:flex;align-items:center;justify-content:center;gap:8px;
  padding:14px;
  background:var(--c-accent);
  border-radius:var(--radius-md);
  border:none;cursor:pointer;color:#fff;
  font-size:1rem;font-weight:700;
  touch-action:manipulation;
  transition:transform 0.15s,opacity 0.15s;
}
.btn-add:active{transform:scale(0.97);opacity:0.9}

/* ‚îÄ‚îÄ ADD USER SCREEN ‚îÄ‚îÄ */
.input-name{
  width:100%;padding:14px 16px;
  background:var(--c-surface2);
  border:2px solid var(--c-surface3);
  border-radius:var(--radius-md);
  color:var(--c-text);font-size:1.1rem;
  outline:none;
  transition:border-color 0.2s;
}
.input-name:focus{border-color:var(--c-accent)}
.emoji-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(52px,1fr));
  gap:8px;
}
.emoji-btn{
  height:52px;
  display:flex;align-items:center;justify-content:center;
  font-size:1.6rem;
  background:var(--c-surface2);
  border-radius:var(--radius-sm);
  border:2px solid transparent;
  cursor:pointer;
  touch-action:manipulation;
  transition:transform 0.15s;
}
.emoji-btn.selected{border-color:var(--c-accent);background:rgba(108,99,255,0.2)}
.emoji-btn:active{transform:scale(0.88)}
.section-label{
  font-size:0.75rem;font-weight:700;
  text-transform:uppercase;letter-spacing:0.08em;
  color:var(--c-text-dim);
  margin-bottom:4px;
}

/* ‚îÄ‚îÄ SETTINGS SCREEN ‚îÄ‚îÄ */
.seg-group{display:flex;gap:6px;flex-wrap:wrap}
.seg-btn{
  flex:1;min-width:60px;
  padding:10px 8px;
  background:var(--c-surface2);
  border:2px solid transparent;
  border-radius:var(--radius-sm);
  color:var(--c-text-dim);
  font-size:0.85rem;font-weight:600;
  cursor:pointer;text-align:center;
  touch-action:manipulation;
  transition:all 0.15s;
}
.seg-btn.active{
  background:rgba(108,99,255,0.25);
  border-color:var(--c-accent);
  color:var(--c-text);
}
.seg-btn:active{transform:scale(0.95)}
.toggle-row{
  display:flex;align-items:center;gap:12px;
  padding:12px 0;
}
.toggle-label{flex:1;font-size:0.95rem;font-weight:600}
.toggle-switch{
  width:50px;height:28px;
  background:var(--c-surface3);
  border-radius:14px;
  position:relative;cursor:pointer;
  border:none;
  transition:background 0.2s;
  flex-shrink:0;
  touch-action:manipulation;
}
.toggle-switch.on{background:var(--c-accent)}
.toggle-switch::after{
  content:'';
  position:absolute;top:3px;left:3px;
  width:22px;height:22px;
  background:#fff;border-radius:50%;
  transition:transform 0.2s;
  box-shadow:0 2px 4px rgba(0,0,0,0.3);
}
.toggle-switch.on::after{transform:translateX(22px)}
.table-grid{
  display:grid;grid-template-columns:repeat(5,1fr);
  gap:8px;
}
.table-btn{
  height:48px;
  display:flex;align-items:center;justify-content:center;
  font-size:1rem;font-weight:700;
  background:var(--c-surface2);
  border:2px solid var(--c-success);
  border-radius:var(--radius-sm);
  cursor:pointer;color:var(--c-success);
  touch-action:manipulation;
  transition:all 0.15s;
}
.table-btn.disabled{
  border-color:var(--c-danger);
  color:var(--c-danger);
  background:rgba(255,82,82,0.1);
}
.table-btn:active{transform:scale(0.9)}
.btn-start{
  padding:18px;
  background:#2ecc71;
  border:none;border-radius:var(--radius-lg);
  color:#fff;font-size:1.2rem;font-weight:800;
  cursor:pointer;width:100%;
  touch-action:manipulation;
  box-shadow:0 2px 12px rgba(46,204,113,0.4);
  transition:transform 0.15s,opacity 0.15s;
  letter-spacing:0.05em;
}
.btn-start:active{transform:scale(0.97);opacity:0.9}

/* ‚îÄ‚îÄ GAME SCREEN ‚îÄ‚îÄ */
.game-screen{
  flex:1;display:flex;flex-direction:column;
  padding:16px;gap:0;
  overflow:hidden;
}
.game-header{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:8px;
  flex-shrink:0;
}
.game-score{
  font-size:1.4rem;font-weight:800;
  color:var(--c-accent);
  min-width:80px;
  text-align:center;
  position:relative;
}
.game-progress{
  font-size:0.9rem;color:var(--c-text-dim);font-weight:600;
}
.timer-bar-wrap{
  height:8px;background:var(--c-surface2);
  border-radius:4px;overflow:hidden;
  flex-shrink:0;
  margin-bottom:8px;
}
.timer-bar{
  height:100%;
  border-radius:4px;
  transition:background-color 0.5s;
  transform-origin:left;
}
.question-area{
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  gap:16px;
  min-height:0;
}
.question-text{
  font-size:clamp(2.5rem,10vw,5rem);
  font-weight:900;
  text-align:center;
  letter-spacing:0.05em;
  color:var(--c-text);
}
.question-text.second-chance{color:var(--c-warning)}
.answer-display{
  font-size:clamp(2rem,8vw,4rem);
  font-weight:800;
  min-width:120px;min-height:70px;
  display:flex;align-items:center;justify-content:center;
  background:var(--c-surface2);
  border-radius:var(--radius-md);
  border:3px solid var(--c-surface3);
  color:var(--c-accent);
  transition:border-color 0.2s;
  position:relative;
}
.answer-display.has-value{border-color:var(--c-accent)}
.numpad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  width:100%;
  max-width:320px;
  flex-shrink:0;
  padding-top:8px;
  align-self:center;
}
.numpad-btn{
  height:72px;
  display:flex;align-items:center;justify-content:center;
  font-size:1.5rem;font-weight:700;
  background:var(--c-numpad);
  border:2px solid var(--c-surface3);
  border-radius:var(--radius-md);
  cursor:pointer;color:var(--c-text);
  touch-action:manipulation;
  transition:transform 0.1s,background 0.1s;
  -webkit-tap-highlight-color:transparent;
}
.numpad-btn:active,.numpad-btn.pressed{
  transform:scale(0.88);
  background:var(--c-accent);
  border-color:var(--c-accent);
}
.numpad-btn.submit{
  background:var(--c-accent);
  border-color:var(--c-accent);
  color:#fff;
}
.numpad-btn.submit:active,.numpad-btn.submit.pressed{
  background:#5550dd;
}
.numpad-btn.delete{color:var(--c-text-dim)}
.numpad-btn.disabled{opacity:0.3;pointer-events:none}

/* Score popup */
.score-popup{
  position:absolute;
  font-size:1.4rem;font-weight:800;
  color:var(--c-success);
  pointer-events:none;
  top:-20px;left:50%;
  transform:translateX(-50%);
  white-space:nowrap;
  text-shadow:0 0 10px rgba(67,233,123,0.5);
}

/* ‚îÄ‚îÄ RESULT SCREEN ‚îÄ‚îÄ */
.result-screen{
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  padding:24px;gap:20px;
  text-align:center;
  overflow:hidden;
}
.result-emoji{font-size:4rem;line-height:1}
.result-score-box{
  background:var(--c-surface);
  border-radius:var(--radius-lg);
  padding:24px 40px;
  box-shadow:var(--shadow-glow);
}
.result-score-num{
  font-size:3.5rem;font-weight:900;
  color:var(--c-accent);
  line-height:1;
}
.result-score-label{
  font-size:0.85rem;color:var(--c-text-dim);
  margin-top:4px;
  text-transform:uppercase;letter-spacing:0.1em;
}
.result-stats{
  display:flex;gap:20px;justify-content:center;
  font-size:1rem;flex-wrap:wrap;
}
.result-stat{text-align:center}
.result-stat-val{
  font-size:1.4rem;font-weight:800;
  display:block;
}
.result-stat-label{font-size:0.75rem;color:var(--c-text-dim)}
.result-stars{font-size:1.8rem;letter-spacing:4px}
.result-new-best{
  background:linear-gradient(135deg,var(--c-warning),var(--c-accent2));
  color:#fff;padding:6px 16px;border-radius:20px;
  font-size:0.85rem;font-weight:700;letter-spacing:0.05em;
}
.result-actions{
  display:flex;flex-direction:column;gap:10px;width:100%;max-width:300px;
}
.btn-primary{
  padding:16px;
  background:#2ecc71;
  border:none;border-radius:var(--radius-md);
  color:#fff;font-size:1rem;font-weight:700;
  cursor:pointer;width:100%;
  touch-action:manipulation;
  transition:transform 0.15s;
}
.btn-primary:active{transform:scale(0.97)}
.btn-secondary{
  padding:14px;
  background:var(--c-surface2);
  border:none;border-radius:var(--radius-md);
  color:var(--c-text);font-size:0.95rem;font-weight:600;
  cursor:pointer;width:100%;
  touch-action:manipulation;
  transition:transform 0.15s;
}
.btn-secondary:active{transform:scale(0.97)}

/* ‚îÄ‚îÄ STATS SCREEN ‚îÄ‚îÄ */
.stats-table{width:100%;border-collapse:collapse}
.stats-table th{
  font-size:0.7rem;text-transform:uppercase;letter-spacing:0.07em;
  color:var(--c-text-dim);padding:8px 4px;
  border-bottom:1px solid var(--c-surface3);
}
.stats-table td{
  padding:10px 4px;font-size:0.9rem;
  border-bottom:1px solid rgba(255,255,255,0.05);
  text-align:center;
}
.stats-table tr:first-child td{font-weight:700}
.rank-badge{
  display:inline-flex;align-items:center;justify-content:center;
  width:24px;height:24px;
  background:var(--c-accent);
  border-radius:50%;
  font-size:0.7rem;font-weight:700;
}
.stats-duration-list{list-style:none;display:flex;flex-direction:column;gap:8px}
.stats-duration-item{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 12px;
  background:var(--c-surface2);
  border-radius:var(--radius-sm);
  font-size:0.9rem;
}
.duration-val{font-weight:700;color:var(--c-accent)}
.btn-danger{
  padding:14px;
  background:rgba(255,82,82,0.15);
  border:1px solid var(--c-danger);
  border-radius:var(--radius-md);
  color:var(--c-danger);font-size:0.95rem;font-weight:600;
  cursor:pointer;width:100%;
  touch-action:manipulation;
  transition:background 0.2s;
}
.btn-danger:active{background:rgba(255,82,82,0.3)}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,0.7);
  display:flex;align-items:center;justify-content:center;
  z-index:1000;padding:20px;
  backdrop-filter:blur(4px);
}
.modal-box{
  background:var(--c-surface);
  border-radius:var(--radius-lg);
  padding:24px;
  max-width:320px;width:100%;
  box-shadow:var(--shadow);
  display:flex;flex-direction:column;gap:16px;
  animation:modalIn 0.2s ease-out;
}
.modal-msg{font-size:1rem;font-weight:600;text-align:center}
.modal-actions{display:flex;gap:10px}
.modal-actions .btn-secondary,.modal-actions .btn-danger{width:50%}

/* ‚îÄ‚îÄ CONFETTI CANVAS ‚îÄ‚îÄ */
#confetti-canvas{
  position:fixed;inset:0;
  pointer-events:none;
  z-index:999;
  width:100%;height:100%;
}

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes questionIn{
  from{opacity:0;transform:translateY(-24px) scale(0.92)}
  to{opacity:1;transform:translateY(0) scale(1)}
}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  15%{transform:translateX(-14px)}
  30%{transform:translateX(14px)}
  45%{transform:translateX(-10px)}
  60%{transform:translateX(10px)}
  75%{transform:translateX(-5px)}
  90%{transform:translateX(5px)}
}
@keyframes floatUp{
  0%{opacity:1;transform:translateX(-50%) translateY(0) scale(1)}
  80%{opacity:1;transform:translateX(-50%) translateY(-50px) scale(1.15)}
  100%{opacity:0;transform:translateX(-50%) translateY(-70px) scale(0.9)}
}
@keyframes multiplierPop{
  0%{opacity:0;transform:translate(-50%,-50%) scale(0.3) rotate(-15deg)}
  40%{opacity:1;transform:translate(-50%,-50%) scale(1.25) rotate(5deg)}
  65%{transform:translate(-50%,-50%) scale(0.95) rotate(-2deg)}
  80%{opacity:1;transform:translate(-50%,-50%) scale(1.05) rotate(0deg)}
  100%{opacity:0;transform:translate(-50%,-50%) scale(1.1) rotate(0deg)}
}
.multiplier-badge{
  position:fixed;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  font-size:clamp(4rem,18vw,8rem);
  font-weight:900;
  pointer-events:none;
  z-index:500;
  line-height:1;
  text-align:center;
  white-space:nowrap;
  filter:drop-shadow(0 0 30px currentColor);
  animation:multiplierPop 0.85s cubic-bezier(0.22,1,0.36,1) forwards;
}
.multiplier-badge.x2{color:#f9a825}
.multiplier-badge.x4{
  color:#ff6584;
  filter:drop-shadow(0 0 40px #ff6584) drop-shadow(0 0 15px #fff);
}
@keyframes flashGreen{
  0%,100%{border-color:var(--c-surface3)}
  30%{border-color:var(--c-success);box-shadow:0 0 20px rgba(67,233,123,0.4)}
}
@keyframes flashRed{
  0%,100%{border-color:var(--c-surface3)}
  30%{border-color:var(--c-danger);box-shadow:0 0 20px rgba(255,82,82,0.4)}
}
@keyframes modalIn{
  from{opacity:0;transform:scale(0.9) translateY(20px)}
  to{opacity:1;transform:scale(1) translateY(0)}
}
@keyframes pulseAccent{
  0%,100%{box-shadow:0 0 0 0 rgba(108,99,255,0)}
  50%{box-shadow:0 0 0 8px rgba(108,99,255,0.3)}
}
@keyframes scoreCountUp{
  0%{transform:scale(1)}
  50%{transform:scale(1.1)}
  100%{transform:scale(1)}
}
@keyframes btnPress{
  0%,100%{transform:scale(1)}
  50%{transform:scale(0.88)}
}
@keyframes fadeIn{
  from{opacity:0}to{opacity:1}
}

.anim-question-in{animation:questionIn 0.3s ease-out forwards}
.anim-shake{animation:shake 0.5s ease-out}
.anim-flash-green{animation:flashGreen 0.4s ease-out}
.anim-flash-red{animation:flashRed 0.4s ease-out}
.anim-score-popup{animation:floatUp 0.8s ease-out forwards}
.anim-fade-in{animation:fadeIn 0.3s ease-out}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(min-width:500px){
  .numpad{max-width:340px}
  .numpad-btn{height:78px;font-size:1.6rem}
}
@media(min-width:768px){
  .screen{padding:24px;max-width:500px;margin:0 auto;width:100%}
  .game-screen{max-width:500px;margin:0 auto;width:100%;padding:24px}
  .result-screen{max-width:500px;margin:0 auto;width:100%}
  .numpad{max-width:360px}
  .numpad-btn{height:82px;font-size:1.7rem}
}

/* Highscore highlight */
.hs-row-best{background:rgba(108,99,255,0.1);border-radius:8px}
</style>
</head>
<body>
<div id="app"></div>
<canvas id="confetti-canvas" style="display:none"></canvas>

<script>
'use strict';
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CONSTANTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const STORAGE_KEY = 'mathtables_v1';
const TIME_LIMITS = {off:null,easy:10000,hard:6000,extreme:3000};
const DIFFICULTY_BONUS = {off:1.0,easy:1.0,hard:1.3,extreme:1.7};
const MAX_TABLE = {off:10,easy:10,hard:10,extreme:10};
const DIFFICULTY_LEVELS = ['off','easy','hard','extreme'];
const GAME_MODES = ['fixed_count','fixed_time','extensive','double_extensive'];
const FIXED_COUNT = 20;
const FIXED_TIME_MS = 120000; // 2 min

const EMOJIS = [
  'ü¶ä','üê∏','üêº','üê®','ü¶Å','üêØ','üêÆ','üê∑',
  'üê∂','üê±','üê≠','üêπ','üê∞','ü¶ã','üêô','ü¶Ä',
  'üê¨','ü¶Ö','ü¶ö','ü¶ú','üéØ','üöÄ','‚öΩ','üéÆ',
  'üëæ','üåü','üçÄ','üçâ','üé∏','ü§ñ','üëª','üê≤'
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// I18N
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const I18N = {
  fr:{
    title:'Tables',
    addPlayer:'Ajouter joueur',
    yourName:'Ton pr√©nom',
    pickEmoji:'Choisis ton avatar',
    create:'Cr√©er',
    difficulty:'Niveau',
    off:'Sans limite de temps',easy:'Facile (10s)',hard:'Difficile (6s)',extreme:'Extr√™me (3s)',
    mode:'Mode',
    fixed_count:'20 questions',fixed_time:'‚è± 2min',extensive:'Tout',double_extensive:'Double',
    boostHard:'Renforcer les difficiles',
    tables:'Tables',
    startGame:'Jouer !',
    score:'Score',
    question:'Question',
    correct:'‚úì Correct',second:'¬Ω Deuxi√®me',wrong:'‚úó Erreur',
    gameOver:'Fin de partie',
    newBest:'Nouveau record !',
    viewStats:'Statistiques',
    playAgain:'Rejouer',
    home:'Accueil',
    hardestQs:'üî• Questions difficiles',
    avgDuration:'‚è± Dur√©e moyenne',
    deleteAccount:'Supprimer le compte',
    confirmDelete:'Supprimer ce compte et toutes ses donn√©es ?',
    cancel:'Annuler',
    confirm:'Confirmer',
    noData:'Pas encore de donn√©es',
    pts:'pts',
    q:'Q',
    wrong_pct:'Erreurs',
    avg_time:'Temps moy.',
    mode_label:'Mode',
    duration:'Dur√©e',
    back:'‚Üê',
    stats:'‚Ñπ',
    noHighscores:'Pas encore de score',
  },
  en:{
    title:'Tables',
    addPlayer:'Add player',
    yourName:'Your name',
    pickEmoji:'Pick your avatar',
    create:'Create',
    difficulty:'Level',
    off:'No time limit',easy:'Easy (10s)',hard:'Hard (6s)',extreme:'Extreme (3s)',
    mode:'Mode',
    fixed_count:'20 questions',fixed_time:'‚è± 2min',extensive:'All',double_extensive:'Double',
    boostHard:'Boost hard questions',
    tables:'Tables',
    startGame:'Play !',
    score:'Score',
    question:'Question',
    correct:'‚úì Correct',second:'¬Ω Second',wrong:'‚úó Wrong',
    gameOver:'Game Over',
    newBest:'New record!',
    viewStats:'Statistics',
    playAgain:'Play again',
    home:'Home',
    hardestQs:'üî• Hardest questions',
    avgDuration:'‚è± Average duration',
    deleteAccount:'Delete account',
    confirmDelete:'Delete this account and all its data?',
    cancel:'Cancel',
    confirm:'Confirm',
    noData:'No data yet',
    pts:'pts',
    q:'Q',
    wrong_pct:'Wrong',
    avg_time:'Avg time',
    mode_label:'Mode',
    duration:'Duration',
    back:'‚Üê',
    stats:'‚Ñπ',
    noHighscores:'No score yet',
  },
  nl:{
    title:'Tafels',
    addPlayer:'Speler toevoegen',
    yourName:'Jouw naam',
    pickEmoji:'Kies je avatar',
    create:'Aanmaken',
    difficulty:'Niveau',
    off:'Geen tijd limiet',easy:'Makkelijk (10s)',hard:'Moeilijk (6s)',extreme:'Extreem (3s)',
    mode:'Modus',
    fixed_count:'20 vragen',fixed_time:'‚è± 2min',extensive:'Alles',double_extensive:'Dubbel',
    boostHard:'Moeilijke vragen versterken',
    tables:'Tafels',
    startGame:'Spelen !',
    score:'Score',
    question:'Vraag',
    correct:'‚úì Goed',second:'¬Ω Tweede',wrong:'‚úó Fout',
    gameOver:'Einde spel',
    newBest:'Nieuw record!',
    viewStats:'Statistieken',
    playAgain:'Opnieuw',
    home:'Home',
    hardestQs:'üî• Moeilijkste vragen',
    avgDuration:'‚è± Gemiddelde duur',
    deleteAccount:'Account verwijderen',
    confirmDelete:'Dit account en alle gegevens verwijderen?',
    cancel:'Annuleren',
    confirm:'Bevestigen',
    noData:'Nog geen gegevens',
    pts:'pts',
    q:'V',
    wrong_pct:'Fouten',
    avg_time:'Gem. tijd',
    mode_label:'Modus',
    duration:'Duur',
    back:'‚Üê',
    stats:'‚Ñπ',
    noHighscores:'Nog geen score',
  }
};
function t(key){
  return (I18N[App.lang]||I18N.fr)[key] || (I18N.en[key]) || key;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STORAGE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const Store = {
  data: null,
  _saveTimer: null,
  load(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      this.data = raw ? JSON.parse(raw) : this._fresh();
    }catch(e){
      this.data = this._fresh();
    }
    // Migrate / ensure structure
    if(!this.data.users) this.data.users={};
    if(!this.data.answers) this.data.answers={};
    if(!this.data.lang) this.data.lang='fr';
    return this.data;
  },
  _fresh(){return{lang:'fr',users:{},answers:{}}},
  save(){
    clearTimeout(this._saveTimer);
    this._saveTimer = setTimeout(()=>{
      try{localStorage.setItem(STORAGE_KEY,JSON.stringify(this.data));}catch(e){}
    },300);
  },
  saveNow(){
    try{localStorage.setItem(STORAGE_KEY,JSON.stringify(this.data));}catch(e){}
  },
  uid(){
    if(crypto.randomUUID) return crypto.randomUUID();
    return Math.random().toString(36).slice(2)+Date.now().toString(36);
  },
  addUser(name,emoji){
    const id=this.uid();
    this.data.users[id]={
      id,name,emoji,createdAt:Date.now(),
      settings:{difficulty:'off',mode:'fixed_count',boostDifficult:false,disabledTables:[]},
      highscores:[]
    };
    this.data.answers[id]={};
    this.save();
    return id;
  },
  deleteUser(id){
    delete this.data.users[id];
    delete this.data.answers[id];
    this.save();
  },
  getUser(id){return this.data.users[id]},
  getUsers(){return Object.values(this.data.users)},
  saveAnswer(userId,a,b,correct,secondChance,timeTakenMs){
    if(!this.data.answers[userId]) this.data.answers[userId]={};
    const key=`${Math.min(a,b)}x${Math.max(a,b)}`;
    let r=this.data.answers[userId][key];
    if(!r) r=this.data.answers[userId][key]={attempts:0,correct:0,wrong:0,secondChance:0,totalTime:0,avgTime:0};
    r.attempts++;
    if(correct && !secondChance){r.correct++;r.totalTime+=timeTakenMs;r.avgTime=Math.round(r.totalTime/r.correct);}
    else if(correct && secondChance){r.secondChance++;}
    else{r.wrong++;}
    this.save();
  },
  addHighscore(userId,hs){
    const u=this.data.users[userId];
    if(!u) return false;
    u.highscores.push(hs);
    u.highscores.sort((a,b)=>b.score-a.score);
    if(u.highscores.length>10) u.highscores.length=10;
    const isNew = u.highscores[0].id===hs.id && hs.score>0;
    this.save();
    return isNew;
  },
  getAnswers(userId){return this.data.answers[userId]||{}},
  getTop10Hard(userId){
    const ans=this.getAnswers(userId);
    return Object.entries(ans)
      .filter(([,v])=>v.attempts>0)
      .map(([k,v])=>{
        const total=v.correct+v.secondChance+v.wrong;
        const wrongPct=total>0?Math.round((v.wrong/total)*100):0;
        return{key:k,wrongPct,avgTime:v.avgTime,wrong:v.wrong,attempts:total};
      })
      .sort((a,b)=>b.wrongPct-a.wrongPct||b.avgTime-a.avgTime)
      .slice(0,10);
  },
  getAvgDurations(userId){
    const u=this.getUser(userId);
    if(!u||!u.highscores.length) return [];
    const map={};
    u.highscores.forEach(h=>{
      const key=`${h.difficulty}/${h.mode}`;
      if(!map[key]) map[key]={key,total:0,count:0};
      map[key].total+=h.duration;map[key].count++;
    });
    return Object.values(map).map(m=>({...m,avg:Math.round(m.total/m.count)}));
  }
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SOUND ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const Sound = {
  ctx:null,master:null,muted:false,
  init(){
    if(this.ctx) return;
    try{
      this.ctx=new(window.AudioContext||window.webkitAudioContext)();
      this.master=this.ctx.createGain();
      this.master.gain.value=0.35;
      this.master.connect(this.ctx.destination);
    }catch(e){}
  },
  _tone(freq,type,start,dur,gain=0.4){
    if(!this.ctx||this.muted) return;
    try{
      const o=this.ctx.createOscillator();
      const g=this.ctx.createGain();
      o.connect(g);g.connect(this.master);
      o.type=type;
      o.frequency.setValueAtTime(freq,start);
      g.gain.setValueAtTime(gain,start);
      g.gain.exponentialRampToValueAtTime(0.001,start+dur);
      o.start(start);o.stop(start+dur+0.01);
    }catch(e){}
  },
  correct(){
    const n=this.ctx?this.ctx.currentTime:0;
    this._tone(523,'sine',n,0.12,0.5);
    this._tone(659,'sine',n+0.08,0.12,0.5);
    this._tone(784,'sine',n+0.16,0.18,0.5);
  },
  wrong(){
    const n=this.ctx?this.ctx.currentTime:0;
    this._tone(277,'sawtooth',n,0.15,0.4);
    this._tone(233,'sawtooth',n+0.12,0.2,0.35);
    this._tone(196,'sawtooth',n+0.25,0.25,0.3);
  },
  secondChance(){
    const n=this.ctx?this.ctx.currentTime:0;
    this._tone(392,'triangle',n,0.12,0.3);
    this._tone(330,'triangle',n+0.15,0.12,0.3);
  },
  scoreUp(){
    const n=this.ctx?this.ctx.currentTime:0;
    [523,587,659,698,784].forEach((f,i)=>this._tone(f,'sine',n+i*0.055,0.1,0.3));
  },
  scoreDouble(){
    // Bright x2 fanfare: rising major arpeggio, slightly triumphant
    const n=this.ctx?this.ctx.currentTime:0;
    [523,659,784,1047,1319].forEach((f,i)=>this._tone(f,'sine',n+i*0.07,0.18,0.45));
    this._tone(1047,'triangle',n+0.38,0.25,0.3);
  },
  scoreQuad(){
    // Epic x4 fanfare: full chord + sparkle
    const n=this.ctx?this.ctx.currentTime:0;
    [262,330,392,523].forEach((f,i)=>this._tone(f,'sine',n+i*0.04,0.35,0.4));
    [1047,1319,1568].forEach((f,i)=>this._tone(f,'sine',n+0.18+i*0.07,0.22,0.45));
    this._tone(2093,'sine',n+0.45,0.3,0.25);
  },
  gameOverWin(){
    const n=this.ctx?this.ctx.currentTime:0;
    [523,659,784,1047].forEach((f,i)=>this._tone(f,'sine',n+i*0.14,0.18,0.4));
    this._tone(1047,'sine',n+0.6,0.4,0.35);
  },
  gameOverLose(){
    const n=this.ctx?this.ctx.currentTime:0;
    [392,349,330,294].forEach((f,i)=>this._tone(f,'triangle',n+i*0.12,0.15,0.35));
  },
  tick(){
    const n=this.ctx?this.ctx.currentTime:0;
    this._tone(880,'sine',n,0.05,0.2);
  }
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CONFETTI
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function launchConfetti(){
  const canvas=document.getElementById('confetti-canvas');
  canvas.style.display='block';
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
  const ctx=canvas.getContext('2d');
  const emojis=['üéâ','‚≠ê','‚ú®','üéä','üí´','üèÜ'];
  const colors=['#6c63ff','#ff6584','#43e97b','#f9a825','#ff5252','#4fc3f7'];
  const particles=[];
  for(let i=0;i<80;i++){
    particles.push({
      x:Math.random()*canvas.width,y:-20,
      vx:(Math.random()-0.5)*4,vy:Math.random()*2+1,
      rot:Math.random()*360,rotSpeed:(Math.random()-0.5)*6,
      color:colors[Math.floor(Math.random()*colors.length)],
      emoji:Math.random()>0.6?emojis[Math.floor(Math.random()*emojis.length)]:null,
      size:Math.random()*10+8,life:1
    });
  }
  let start=null;
  function frame(ts){
    if(!start) start=ts;
    const elapsed=(ts-start)/1000;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    let alive=false;
    particles.forEach(p=>{
      p.x+=p.vx;p.y+=p.vy;p.vy+=0.05;
      p.rot+=p.rotSpeed;
      p.life=Math.max(0,1-elapsed/4);
      if(p.y<canvas.height+20 && p.life>0){alive=true;}
      ctx.save();ctx.globalAlpha=p.life;
      ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);
      if(p.emoji){
        ctx.font=`${p.size*1.5}px serif`;
        ctx.textAlign='center';ctx.textBaseline='middle';
        ctx.fillText(p.emoji,0,0);
      } else {
        ctx.fillStyle=p.color;
        ctx.fillRect(-p.size/2,-p.size/3,p.size,p.size*0.6);
      }
      ctx.restore();
    });
    if(alive && elapsed<5) requestAnimationFrame(frame);
    else{ctx.clearRect(0,0,canvas.width,canvas.height);canvas.style.display='none';}
  }
  requestAnimationFrame(frame);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// GAME LOGIC
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const Game = {
  user:null,
  questions:[],
  current:0,
  secondChance:false,
  questionStartTime:0,
  gameStartTime:0,
  answers:[],
  score:0,
  streak:0,
  rafId:null,
  timerRafId:null,
  currentAnswer:'',
  mode:null,
  difficulty:null,
  timeLimit:null,
  fixedTimeEnd:0,
  numpadLocked:false,

  buildPool(user){
    const s=user.settings;
    const max=MAX_TABLE[s.difficulty]||10;
    const disabled=new Set(s.disabledTables||[]);
    let pool=[];
    for(let a=1;a<=max;a++){
      for(let b=1;b<=max;b++){
        if(disabled.has(a)||disabled.has(b)) continue;
        pool.push({a,b});
      }
    }
    // Boost difficult questions
    if(s.boostDifficult){
      const top=Store.getTop10Hard(user.id);
      top.forEach(item=>{
        const [x,y]=item.key.split('x').map(Number);
        if(x<=max&&y<=max&&!disabled.has(x)&&!disabled.has(y)){
          for(let i=0;i<3;i++) pool.push({a:x,b:y});
        }
      });
    }
    // Shuffle
    for(let i=pool.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [pool[i],pool[j]]=[pool[j],pool[i]];
    }
    const mode=s.mode;
    if(mode==='fixed_count'){
      return pool.slice(0,FIXED_COUNT);
    } else if(mode==='fixed_time'){
      // repeat pool as needed
      let extended=[];
      while(extended.length<200) extended=[...extended,...pool];
      return extended.slice(0,200);
    } else if(mode==='extensive'){
      return pool;
    } else { // double_extensive
      const reversed=pool.map(q=>({a:q.b,b:q.a}));
      // shuffle reversed separately
      for(let i=reversed.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [reversed[i],reversed[j]]=[reversed[j],reversed[i]];
      }
      return [...pool,...reversed];
    }
  },

  start(userId){
    const user=Store.getUser(userId);
    if(!user) return;
    this.user=user;
    this.questions=this.buildPool(user);
    this.current=0;
    this.secondChance=false;
    this.answers=[];
    this.score=0;
    this.streak=0;
    this.currentAnswer='';
    this.mode=user.settings.mode;
    this.difficulty=user.settings.difficulty;
    this.timeLimit=TIME_LIMITS[this.difficulty];
    this.gameStartTime=Date.now();
    this.fixedTimeEnd=this.gameStartTime+FIXED_TIME_MS;
    App.go('GAME_ACTIVE');
  },

  _multiplierFor(a,b){
    const HARD=[6,7,8,9];
    const hardA=HARD.includes(a);
    const hardB=HARD.includes(b);
    if(hardA&&hardB) return 4;
    if(hardA||hardB) return 2;
    return 1;
  },

  computeQuestionScore(timeTakenMs,mult){
    let base;
    if(this.timeLimit===null){
      base=100;
    } else {
      const fast=this.timeLimit*0.15;
      const fraction=Math.max(0,Math.min(1,(this.timeLimit-timeTakenMs)/(this.timeLimit-fast)));
      const timeBonus=Math.round(200*fraction);
      const streakBonus=Math.min(this.streak*15,120);
      base=100+timeBonus+streakBonus;
    }
    const diffBonus=DIFFICULTY_BONUS[this.difficulty]||1.0;
    return Math.round(base*(mult||1)*diffBonus);
  },

  submitAnswer(val){
    if(this.numpadLocked) return;
    const q=this.questions[this.current];
    const expected=q.a*q.b;
    const timeTaken=Date.now()-this.questionStartTime;
    const isCorrect=parseInt(val,10)===expected;

    if(isCorrect){
      this.numpadLocked=true;
      const mult=this._multiplierFor(q.a,q.b);
      const qScore=this.secondChance?0:this.computeQuestionScore(timeTaken,mult);
      this.score+=qScore;
      this.streak=this.secondChance?0:this.streak+1;
      Store.saveAnswer(this.user.id,q.a,q.b,true,this.secondChance,timeTaken);
      this.answers.push({a:q.a,b:q.b,correct:true,secondChance:this.secondChance,timeTaken,score:qScore});
      this._onCorrect(qScore,this.secondChance?1:mult);
    } else {
      if(!this.secondChance){
        this.secondChance=true;
        Store.saveAnswer(this.user.id,q.a,q.b,false,false,timeTaken);
        this.streak=0;
        this._onWrong(false);
      } else {
        this.numpadLocked=true;
        Store.saveAnswer(this.user.id,q.a,q.b,false,true,timeTaken);
        this.answers.push({a:q.a,b:q.b,correct:false,secondChance:true,timeTaken,score:0});
        this._onWrong(true);
        // Show correct answer briefly then advance
        setTimeout(()=>{
          const disp=document.getElementById('answer-display');
          if(disp) {
            disp.textContent=expected;
            disp.style.color='var(--c-danger)';
          }
          setTimeout(()=>this.nextQuestion(),1200);
        },400);
      }
    }
  },

  _onCorrect(qScore,mult){
    Sound.correct();
    if(qScore>0){
      if(mult===4) Sound.scoreQuad();
      else if(mult===2) Sound.scoreDouble();
      else Sound.scoreUp();
    }
    const disp=document.getElementById('answer-display');
    if(disp){
      disp.classList.add('anim-flash-green');
      setTimeout(()=>disp.classList.remove('anim-flash-green'),400);
      if(qScore>0){
        const popup=document.createElement('div');
        popup.className='score-popup anim-score-popup';
        popup.textContent=`+${qScore}`;
        disp.style.position='relative';
        disp.appendChild(popup);
        setTimeout(()=>popup.remove(),800);
      }
    }
    // Show multiplier badge for x2 / x4
    if(mult>=2){
      const badge=document.createElement('div');
      badge.className=`multiplier-badge x${mult}`;
      badge.textContent=`√ó${mult}`;
      document.getElementById('app').appendChild(badge);
      setTimeout(()=>badge.remove(),850);
    }
    // Update score display
    const scoreEl=document.getElementById('game-score');
    if(scoreEl){
      scoreEl.textContent=this.score;
      scoreEl.style.animation='none';
      requestAnimationFrame(()=>{
        scoreEl.style.animation='scoreCountUp 0.3s ease-out';
      });
    }
    setTimeout(()=>this.nextQuestion(),mult>=2?900:600);
  },

  _onWrong(final){
    Sound.wrong();
    const area=document.getElementById('question-area');
    if(area){
      area.classList.add('anim-shake');
      setTimeout(()=>area.classList.remove('anim-shake'),500);
    }
    const disp=document.getElementById('answer-display');
    if(disp){
      disp.classList.add('anim-flash-red');
      setTimeout(()=>disp.classList.remove('anim-flash-red'),400);
    }
    if(!final){
      Sound.secondChance();
      // Clear answer and show second chance indicator
      this.currentAnswer='';
      this._updateAnswerDisplay();
      const qt=document.getElementById('question-text');
      if(qt) qt.className='question-text second-chance';
      this.questionStartTime=Date.now(); // reset timer for second chance
      this._startTimer();
      this.numpadLocked=false;
    }
  },

  nextQuestion(){
    this.numpadLocked=false;
    cancelAnimationFrame(this.timerRafId);
    this.current++;
    this.secondChance=false;
    this.currentAnswer='';

    // Check game end conditions
    if(this.mode==='fixed_time' && Date.now()>=this.fixedTimeEnd){
      this.end();return;
    }
    if(this.mode!=='fixed_time' && this.current>=this.questions.length){
      this.end();return;
    }
    if(this.mode==='fixed_time' && this.current>=this.questions.length){
      this.end();return;
    }

    this.showQuestion();
  },

  showQuestion(){
    const q=this.questions[this.current];
    if(!q){this.end();return;}
    this.questionStartTime=Date.now();

    // Update progress
    const progressEl=document.getElementById('game-progress');
    if(progressEl){
      if(this.mode==='fixed_time'){
        const remaining=Math.max(0,Math.ceil((this.fixedTimeEnd-Date.now())/1000));
        const m=Math.floor(remaining/60);const s=remaining%60;
        progressEl.textContent=`${m}:${s.toString().padStart(2,'0')}`;
      } else {
        const total=this.questions.length;
        progressEl.textContent=`${t('q')} ${this.current+1}/${total}`;
      }
    }

    // Update question text with animation
    const qt=document.getElementById('question-text');
    if(qt){
      qt.className='question-text';
      qt.innerHTML=`<span>${q.a}</span> <span style="color:var(--c-accent2)">√ó</span> <span>${q.b}</span> <span style="color:var(--c-text-dim)">=</span>`;
      qt.classList.add('anim-question-in');
      setTimeout(()=>qt.classList.remove('anim-question-in'),300);
    }
    // Clear answer
    this._updateAnswerDisplay();
    this.numpadLocked=false;
    this._startTimer();
  },

  _updateAnswerDisplay(){
    const disp=document.getElementById('answer-display');
    if(!disp) return;
    disp.textContent=this.currentAnswer||'?';
    disp.style.color=this.currentAnswer?'var(--c-accent)':'var(--c-text-dim)';
    if(this.currentAnswer) disp.classList.add('has-value');
    else disp.classList.remove('has-value');
  },

  _startTimer(){
    cancelAnimationFrame(this.timerRafId);
    const bar=document.getElementById('timer-bar');
    if(!bar) return;
    if(!this.timeLimit){
      bar.style.width='100%';
      bar.style.backgroundColor='var(--c-accent)';
      return;
    }
    const start=performance.now();
    const limit=this.timeLimit;
    let tickedAt3=false;
    const frame=(now)=>{
      const elapsed=now-start;
      const pct=Math.max(0,1-elapsed/limit);
      bar.style.width=(pct*100)+'%';
      const hue=Math.round(pct*120);
      bar.style.backgroundColor=`hsl(${hue},80%,55%)`;
      if(pct<=0.25 && !tickedAt3){
        Sound.tick();tickedAt3=true;
      }
      if(elapsed<limit){
        this.timerRafId=requestAnimationFrame(frame);
      } else {
        this._onTimeout();
      }
    };
    this.timerRafId=requestAnimationFrame(frame);
  },

  _onTimeout(){
    if(this.numpadLocked) return;
    this.numpadLocked=true;
    const q=this.questions[this.current];
    Sound.wrong();
    if(!this.secondChance){
      this.secondChance=true;
      this.streak=0;
      Store.saveAnswer(this.user.id,q.a,q.b,false,false,this.timeLimit);
      const area=document.getElementById('question-area');
      if(area){area.classList.add('anim-shake');setTimeout(()=>area.classList.remove('anim-shake'),500);}
      Sound.secondChance();
      this.currentAnswer='';
      this._updateAnswerDisplay();
      const qt=document.getElementById('question-text');
      if(qt) qt.className='question-text second-chance';
      this.questionStartTime=Date.now();
      this._startTimer();
      this.numpadLocked=false;
    } else {
      Store.saveAnswer(this.user.id,q.a,q.b,false,true,this.timeLimit);
      this.answers.push({a:q.a,b:q.b,correct:false,secondChance:true,timeTaken:this.timeLimit,score:0});
      const disp=document.getElementById('answer-display');
      if(disp){disp.textContent=q.a*q.b;disp.style.color='var(--c-danger)';}
      setTimeout(()=>this.nextQuestion(),1200);
    }
  },

  end(){
    cancelAnimationFrame(this.timerRafId);
    const duration=Date.now()-this.gameStartTime;
    const total=this.answers.length;
    const correct=this.answers.filter(a=>a.correct&&!a.secondChance).length;
    const second=this.answers.filter(a=>a.correct&&a.secondChance).length;
    const wrong=this.answers.filter(a=>!a.correct).length;

    const hs={
      id:Store.uid(),score:this.score,
      mode:this.mode,difficulty:this.difficulty,
      date:Date.now(),duration,
      totalQuestions:total,correctFirst:correct,
      correctSecond:second,wrong
    };
    const isNew=Store.addHighscore(this.user.id,hs);

    App.resultData={score:this.score,duration,correct,second,wrong,isNew,userId:this.user.id,hs};
    if(isNew && this.score>0){Sound.gameOverWin();launchConfetti();}
    else Sound.gameOverLose();

    App.go('GAME_RESULT');
  },

  numpadDigit(d){
    if(this.numpadLocked) return;
    Sound.tick();
    if(this.currentAnswer.length<3){
      this.currentAnswer+=d;
      this._updateAnswerDisplay();
    }
    // Animate button
    const btn=document.getElementById(`npbtn-${d}`);
    if(btn){btn.classList.add('pressed');setTimeout(()=>btn.classList.remove('pressed'),120);}
  },
  numpadDelete(){
    if(this.numpadLocked) return;
    this.currentAnswer=this.currentAnswer.slice(0,-1);
    this._updateAnswerDisplay();
  },
  numpadSubmit(){
    if(this.numpadLocked||!this.currentAnswer) return;
    this.submitAnswer(this.currentAnswer);
    this.currentAnswer='';
  }
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UI HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function el(tag,attrs={},children=[]){
  const e=document.createElement(tag);
  Object.entries(attrs).forEach(([k,v])=>{
    if(k==='class') e.className=v;
    else if(k==='style') e.style.cssText=v;
    else if(k.startsWith('on')) e.addEventListener(k.slice(2).toLowerCase(),v);
    else e.setAttribute(k,v);
  });
  children.forEach(c=>{
    if(typeof c==='string') e.appendChild(document.createTextNode(c));
    else if(c) e.appendChild(c);
  });
  return e;
}

function pctCorrect(hs){
  const total=(hs.totalQuestions||0);
  if(!total) return '';
  const correct=(hs.correctFirst||0)+(hs.correctSecond||0);
  return Math.round(correct/total*100)+'%';
}

function formatMs(ms){
  const s=Math.round(ms/1000);
  const m=Math.floor(s/60);const sec=s%60;
  return m>0?`${m}:${sec.toString().padStart(2,'0')}`:`${s}s`;
}

function showModal(msg,onConfirm,confirmClass='btn-danger'){
  const overlay=el('div',{class:'modal-overlay'});
  const box=el('div',{class:'modal-box'},[
    el('div',{class:'modal-msg'},[msg]),
    el('div',{class:'modal-actions'},[
      el('button',{class:'btn-secondary',onClick:()=>overlay.remove()},[t('cancel')]),
      el('button',{class:confirmClass,onClick:()=>{overlay.remove();onConfirm();}},[t('confirm')])
    ])
  ]);
  overlay.appendChild(box);
  document.getElementById('app').appendChild(overlay);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN: HOME
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderHome(){
  const users=Store.getUsers();
  const wrap=el('div',{class:'screen anim-fade-in'});

  // Header row
  const header=el('div',{class:'screen-header'});
  const langBar=el('div',{class:'lang-bar'});
  [['fr','üá´üá∑'],['en','üá¨üáß'],['nl','üá≥üá±']].forEach(([lang,flag])=>{
    const btn=el('button',{
      class:'lang-btn'+(App.lang===lang?' active':''),
      onClick:()=>{App.lang=lang;Store.data.lang=lang;Store.save();App.go('HOME');}
    },[flag]);
    langBar.appendChild(btn);
  });
  const title=el('div',{class:'home-title'},['üßÆ Math Tables']);
  header.appendChild(langBar);
  header.appendChild(title);
  wrap.appendChild(header);

  // User list
  if(users.length===0){
    wrap.appendChild(el('div',{style:'text-align:center;color:var(--c-text-dim);padding:40px 0;font-size:2rem'},['üëã']));
  }
  users.sort((a,b)=>{
    const sa=a.highscores[0]?.score||0;const sb=b.highscores[0]?.score||0;
    return sb-sa;
  }).forEach(user=>{
    const topScore=user.highscores[0]?.score||0;
    const topHS=user.highscores[0];
    const starStr=topHS?pctCorrect(topHS):'';

    const card=el('div',{class:'user-card'});
    const avatar=el('div',{class:'user-avatar'},[user.emoji]);
    const info=el('div',{class:'user-info'},[
      el('div',{class:'user-name'},[user.name]),
      el('div',{class:'user-score'},[topScore>0?`${topScore} ${t('pts')}`:t('noHighscores')]),
      el('div',{class:'user-stars'},[starStr])
    ]);
    const statsBtn=el('button',{
      class:'btn-stats',
      onClick:(e)=>{e.stopPropagation();App.go('STATS',{userId:user.id});}
    },['‚Ñπ Stats']);

    const playBtn=el('button',{
      class:'btn-play-user',
      onClick:()=>App.go('SETTINGS',{userId:user.id})
    },['‚ñ∂ '+t('startGame')]);

    card.appendChild(avatar);
    card.appendChild(info);
    card.appendChild(el('div',{class:'user-actions'},[playBtn,statsBtn]));
    wrap.appendChild(card);
  });

  // Add player button
  wrap.appendChild(el('button',{class:'btn-add',onClick:()=>App.go('ADD_USER')},[
    el('span',{style:'color:#fff;font-size:1.2rem'},['+']),el('span',{},[t('addPlayer')])
  ]));

  document.getElementById('app').appendChild(wrap);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN: ADD USER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderAddUser(){
  let selectedEmoji=EMOJIS[0];
  const wrap=el('div',{class:'screen anim-fade-in'});
  const header=el('div',{class:'screen-header'});
  header.appendChild(el('button',{class:'btn-back',onClick:()=>App.go('HOME')},['‚Üê']));
  header.appendChild(el('div',{style:'font-size:1.1rem;font-weight:700'},[t('addPlayer')]));
  header.appendChild(el('div',{class:'home-title'},['üßÆ Math Tables']));
  wrap.appendChild(header);

  const nameInput=el('input',{
    class:'input-name',type:'text',
    placeholder:t('yourName'),maxlength:'20',
    autocomplete:'off',autocorrect:'off',autocapitalize:'words',spellcheck:'false'
  });
  wrap.appendChild(nameInput);

  wrap.appendChild(el('div',{class:'section-label'},[t('pickEmoji')]));

  const emojiGrid=el('div',{class:'emoji-grid'});
  function refreshEmojis(){
    emojiGrid.innerHTML='';
    EMOJIS.forEach(emoji=>{
      const btn=el('div',{
        class:'emoji-btn'+(emoji===selectedEmoji?' selected':''),
        onClick:()=>{selectedEmoji=emoji;refreshEmojis();}
      },[emoji]);
      emojiGrid.appendChild(btn);
    });
  }
  refreshEmojis();
  wrap.appendChild(emojiGrid);

  wrap.appendChild(el('button',{
    class:'btn-start',
    style:'margin-top:8px',
    onClick:()=>{
      const name=nameInput.value.trim();
      if(!name) return nameInput.focus();
      // Check unique
      if(Store.getUsers().some(u=>u.name.toLowerCase()===name.toLowerCase())){
        nameInput.style.borderColor='var(--c-danger)';return;
      }
      Store.addUser(name,selectedEmoji);
      App.go('HOME');
    }
  },[t('create')]));

  document.getElementById('app').appendChild(wrap);
  setTimeout(()=>nameInput.focus(),100);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN: SETTINGS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderSettings({userId}){
  const user=Store.getUser(userId);
  if(!user){App.go('HOME');return;}
  let s={...user.settings};

  const wrap=el('div',{class:'screen anim-fade-in'});

  // Header
  const header=el('div',{class:'screen-header'});
  header.appendChild(el('button',{class:'btn-back',onClick:()=>App.go('HOME')},['‚Üê']));
  header.appendChild(el('div',{style:'font-size:1.8rem'},[user.emoji]));
  header.appendChild(el('div',{style:'font-size:1rem;font-weight:700'},[user.name]));
  header.appendChild(el('div',{class:'home-title'},['üßÆ Math Tables']));
  wrap.appendChild(header);

  // ---- Difficulty ----
  wrap.appendChild(el('div',{class:'section-label'},[t('difficulty')]));
  const diffGroup=el('div',{class:'seg-group'});
  function refreshDiff(){
    diffGroup.innerHTML='';
    DIFFICULTY_LEVELS.forEach(level=>{
      const btn=el('button',{
        class:'seg-btn'+(s.difficulty===level?' active':''),
        onClick:()=>{s.difficulty=level;refreshDiff();}
      },[t(level)]);
      diffGroup.appendChild(btn);
    });
  }
  refreshDiff();
  wrap.appendChild(diffGroup);

  // ---- Mode ----
  wrap.appendChild(el('div',{class:'section-label',style:'margin-top:12px'},[t('mode')]));
  const modeGroup=el('div',{class:'seg-group'});
  function refreshMode(){
    modeGroup.innerHTML='';
    GAME_MODES.forEach(mode=>{
      const btn=el('button',{
        class:'seg-btn'+(s.mode===mode?' active':''),
        onClick:()=>{s.mode=mode;refreshMode();}
      },[t(mode)]);
      modeGroup.appendChild(btn);
    });
  }
  refreshMode();
  wrap.appendChild(modeGroup);

  // ---- Boost difficult ----
  const boostToggle=el('button',{
    class:'toggle-switch'+(s.boostDifficult?' on':''),
    onClick:function(){s.boostDifficult=!s.boostDifficult;this.className='toggle-switch'+(s.boostDifficult?' on':'');}
  });
  const boostRow=el('div',{class:'toggle-row'},[
    el('span',{class:'toggle-label'},[t('boostHard')]),
    boostToggle
  ]);
  wrap.appendChild(el('div',{class:'card card-sm',style:'margin-top:12px'},[boostRow]));

  // ---- Tables ----
  wrap.appendChild(el('div',{class:'section-label',style:'margin-top:12px'},[t('tables')]));
  const tableGrid=el('div',{class:'table-grid'});
  function refreshTables(){
    tableGrid.innerHTML='';
    for(let i=1;i<=10;i++){
      const disabled=s.disabledTables.includes(i);
      const btn=el('button',{
        class:'table-btn'+(disabled?' disabled':''),
        onClick:()=>{
          if(disabled) s.disabledTables=s.disabledTables.filter(x=>x!==i);
          else s.disabledTables=[...s.disabledTables,i];
          refreshTables();
        }
      },[String(i)]);
      tableGrid.appendChild(btn);
    }
  }
  refreshTables();
  wrap.appendChild(tableGrid);

  // ---- Start ----
  wrap.appendChild(el('button',{
    class:'btn-start',
    style:'margin-top:16px',
    onClick:()=>{
      user.settings={...s};
      Store.save();
      Game.start(userId);
    }
  },['‚ñ∂ '+t('startGame')]));

  document.getElementById('app').appendChild(wrap);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN: GAME ACTIVE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderGame(){
  const wrap=el('div',{class:'game-screen anim-fade-in'});

  // Header
  const header=el('div',{class:'game-header'});
  const quitBtn=el('button',{class:'btn-back',onClick:()=>{
    cancelAnimationFrame(Game.timerRafId);
    App.go('HOME');
  }},['‚úï']);
  const scoreEl=el('div',{id:'game-score',class:'game-score'},[String(Game.score)]);
  const progressEl=el('div',{id:'game-progress',class:'game-progress'});
  header.appendChild(quitBtn);
  header.appendChild(scoreEl);
  header.appendChild(progressEl);
  wrap.appendChild(header);

  // Timer bar
  const timerWrap=el('div',{class:'timer-bar-wrap'});
  const timerBar=el('div',{id:'timer-bar',class:'timer-bar',style:'width:100%;background-color:var(--c-accent)'});
  timerWrap.appendChild(timerBar);
  wrap.appendChild(timerWrap);

  // Question area
  const qArea=el('div',{id:'question-area',class:'question-area'});
  const qText=el('div',{id:'question-text',class:'question-text'});
  const aDisp=el('div',{id:'answer-display',class:'answer-display'},['?']);
  qArea.appendChild(qText);
  qArea.appendChild(aDisp);
  wrap.appendChild(qArea);

  // Numpad
  const numpad=el('div',{class:'numpad'});
  const layout=[['1','2','3'],['4','5','6'],['7','8','9'],['‚å´','0','‚úì']];
  layout.forEach(row=>{
    row.forEach(key=>{
      let cls='numpad-btn';let id='';
      if(key==='‚å´'){cls+=' delete';}
      else if(key==='‚úì'){cls+=' submit';}
      else{id=`npbtn-${key}`;}
      const btn=el('button',{class:cls,id,onClick:()=>{
        Sound.init();
        if(key==='‚å´') Game.numpadDelete();
        else if(key==='‚úì') Game.numpadSubmit();
        else Game.numpadDigit(key);
      }},[key]);
      numpad.appendChild(btn);
    });
  });
  // Touch-specific fast response
  numpad.addEventListener('touchstart',(e)=>{
    const target=e.target.closest('.numpad-btn');
    if(!target) return;
    e.preventDefault();
    Sound.init();
    const key=target.textContent;
    if(key==='‚å´') Game.numpadDelete();
    else if(key==='‚úì') Game.numpadSubmit();
    else Game.numpadDigit(key);
  },{passive:false});

  wrap.appendChild(numpad);
  document.getElementById('app').appendChild(wrap);

  // Start game
  Game.showQuestion();

  // Fixed time: update progress every second
  if(Game.mode==='fixed_time'){
    const interval=setInterval(()=>{
      const progressEl=document.getElementById('game-progress');
      if(!progressEl){clearInterval(interval);return;}
      const remaining=Math.max(0,Math.ceil((Game.fixedTimeEnd-Date.now())/1000));
      const m=Math.floor(remaining/60);const s=remaining%60;
      progressEl.textContent=`${m}:${s.toString().padStart(2,'0')}`;
      if(remaining<=0) clearInterval(interval);
    },1000);
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN: GAME RESULT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderResult(){
  const {score,duration,correct,second,wrong,isNew,userId,hs}=App.resultData||{};
  const user=Store.getUser(userId);
  const wrap=el('div',{class:'result-screen anim-fade-in'});

  wrap.appendChild(el('div',{class:'result-emoji'},[isNew&&score>0?'üèÜ':'üéØ']));
  if(isNew&&score>0) wrap.appendChild(el('div',{class:'result-new-best'},[t('newBest')]));

  const scoreBox=el('div',{class:'result-score-box'});
  const scoreNum=el('div',{class:'result-score-num'},['0']);
  scoreBox.appendChild(scoreNum);
  scoreBox.appendChild(el('div',{class:'result-score-label'},[t('pts')]));
  wrap.appendChild(scoreBox);

  // Stats row
  wrap.appendChild(el('div',{class:'result-stats'},[
    el('div',{class:'result-stat'},[
      el('span',{class:'result-stat-val',style:'color:var(--c-success)'},[String(correct)]),
      el('span',{class:'result-stat-label'},[t('correct')])
    ]),
    el('div',{class:'result-stat'},[
      el('span',{class:'result-stat-val',style:'color:var(--c-warning)'},[String(second)]),
      el('span',{class:'result-stat-label'},[t('second')])
    ]),
    el('div',{class:'result-stat'},[
      el('span',{class:'result-stat-val',style:'color:var(--c-danger)'},[String(wrong)]),
      el('span',{class:'result-stat-label'},[t('wrong')])
    ]),
    el('div',{class:'result-stat'},[
      el('span',{class:'result-stat-val'},[formatMs(duration)]),
      el('span',{class:'result-stat-label'},['‚è±'])
    ])
  ]));

  if(hs&&hs.totalQuestions) wrap.appendChild(el('div',{class:'result-stars'},[pctCorrect(hs)+' '+t('correct')]));

  // Actions
  const actions=el('div',{class:'result-actions'});
  actions.appendChild(el('button',{class:'btn-primary',onClick:()=>{
    Game.start(userId);
  }},['‚ñ∂ '+t('playAgain')]));
  actions.appendChild(el('button',{class:'btn-secondary',onClick:()=>App.go('STATS',{userId})},['‚Ñπ '+t('viewStats')]));
  actions.appendChild(el('button',{class:'btn-secondary',onClick:()=>App.go('HOME')},[t('home')]));
  wrap.appendChild(actions);

  document.getElementById('app').appendChild(wrap);

  // Animate score count-up
  setTimeout(()=>{
    const start=performance.now();
    const dur=1500;
    const target=score||0;
    function frame(now){
      const t=Math.min((now-start)/dur,1);
      const eased=1-Math.pow(1-t,3);
      scoreNum.textContent=Math.round(eased*target);
      if(t<1) requestAnimationFrame(frame);
      else scoreNum.textContent=target;
    }
    requestAnimationFrame(frame);
  },200);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN: STATS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderStats({userId}){
  const user=Store.getUser(userId);
  if(!user){App.go('HOME');return;}
  const wrap=el('div',{class:'screen anim-fade-in'});

  // Header
  const header=el('div',{class:'screen-header'});
  header.appendChild(el('button',{class:'btn-back',onClick:()=>App.go('HOME')},['‚Üê']));
  header.appendChild(el('div',{style:'font-size:1.8rem'},[user.emoji]));
  header.appendChild(el('div',{style:'font-size:1rem;font-weight:700;flex:1'},[user.name]));
  header.appendChild(el('div',{class:'home-title'},['üßÆ Math Tables']));
  wrap.appendChild(header);

  // Top 10 hard
  wrap.appendChild(el('div',{class:'section-label'},[t('hardestQs')]));
  const top10=Store.getTop10Hard(userId);
  if(top10.length===0){
    wrap.appendChild(el('div',{class:'card',style:'text-align:center;color:var(--c-text-dim)'},[t('noData')]));
  } else {
    const card=el('div',{class:'card card-sm'});
    const table=el('table',{class:'stats-table'});
    const thead=el('thead');
    thead.appendChild(el('tr',{},[
      el('th',{},['#']),
      el('th',{},[t('question')]),
      el('th',{},[t('wrong_pct')]),
      el('th',{},[t('avg_time')])
    ]));
    table.appendChild(thead);
    const tbody=el('tbody');
    top10.forEach((item,i)=>{
      const [a,b]=item.key.split('x');
      const row=el('tr',{},[
        el('td',{},[el('span',{class:'rank-badge'},[String(i+1)])]),
        el('td',{style:'font-weight:700;font-size:1rem'},[`${a} √ó ${b}`]),
        el('td',{style:'color:var(--c-danger)'},[`${item.wrongPct}%`]),
        el('td',{style:'color:var(--c-warning)'},[item.avgTime>0?formatMs(item.avgTime):'-'])
      ]);
      tbody.appendChild(row);
    });
    table.appendChild(tbody);
    card.appendChild(table);
    wrap.appendChild(card);
  }

  // Avg durations
  wrap.appendChild(el('div',{class:'section-label',style:'margin-top:12px'},[t('avgDuration')]));
  const durations=Store.getAvgDurations(userId);
  if(durations.length===0){
    wrap.appendChild(el('div',{class:'card',style:'text-align:center;color:var(--c-text-dim)'},[t('noData')]));
  } else {
    const durCard=el('div',{class:'card card-sm'});
    const durList=el('ul',{class:'stats-duration-list'});
    durations.forEach(d=>{
      const [diff,mode]=d.key.split('/');
      durList.appendChild(el('li',{class:'stats-duration-item'},[
        el('span',{},[`${t(diff)} / ${t(mode)}`]),
        el('span',{class:'duration-val'},[formatMs(d.avg)])
      ]));
    });
    durCard.appendChild(durList);
    wrap.appendChild(durCard);
  }

  // Highscores
  if(user.highscores.length>0){
    wrap.appendChild(el('div',{class:'section-label',style:'margin-top:12px'},['üèÜ Top scores']));
    const hsCard=el('div',{class:'card card-sm'});
    user.highscores.slice(0,5).forEach((hs,i)=>{
      const row=el('div',{
        class:'stats-duration-item'+(i===0?' hs-row-best':''),
        style:'margin-bottom:6px'
      },[
        el('span',{style:'font-size:1.1rem'},[String(hs.score)+' '+t('pts')]),
        el('span',{style:'color:var(--c-text-dim);font-size:0.8rem'},[`${t(hs.difficulty)} / ${t(hs.mode)}`]),
        el('span',{class:'duration-val'},[pctCorrect(hs)])
      ]);
      hsCard.appendChild(row);
    });
    wrap.appendChild(hsCard);
  }

  // Delete account
  wrap.appendChild(el('div',{style:'margin-top:20px'},[
    el('button',{class:'btn-danger',onClick:()=>{
      showModal(t('confirmDelete'),()=>{
        Store.deleteUser(userId);
        App.go('HOME');
      });
    }},[`üóëÔ∏è ${t('deleteAccount')}`])
  ]));

  document.getElementById('app').appendChild(wrap);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// APP CONTROLLER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const App = {
  lang:'fr',
  screen:'HOME',
  params:null,
  resultData:null,

  go(screen,params={}){
    this.screen=screen;
    this.params=params;
    const appEl=document.getElementById('app');
    appEl.innerHTML='';
    Sound.init();
    const map={
      HOME:renderHome,
      ADD_USER:renderAddUser,
      SETTINGS:()=>renderSettings(params),
      GAME_ACTIVE:renderGame,
      GAME_RESULT:renderResult,
      STATS:()=>renderStats(params),
    };
    (map[screen]||renderHome)();
  },

  init(){
    Store.load();
    this.lang=Store.data.lang||'fr';
    // Initialize audio on first interaction
    document.addEventListener('touchstart',()=>Sound.init(),{once:true});
    document.addEventListener('click',()=>Sound.init(),{once:true});
    // Keyboard support
    document.addEventListener('keydown',(e)=>{
      if(this.screen==='GAME_ACTIVE'){
        if(e.key>='0'&&e.key<='9') Game.numpadDigit(e.key);
        else if(e.key==='Backspace'||e.key==='Delete') Game.numpadDelete();
        else if(e.key==='Enter') Game.numpadSubmit();
        else if(e.key==='Escape'){ cancelAnimationFrame(Game.timerRafId); App.go('HOME'); }
      } else if(e.key==='Escape'){
        if(this.screen==='ADD_USER'||this.screen==='SETTINGS'||this.screen==='STATS') App.go('HOME');
      }
    });
    this.go('HOME');
  }
};

document.addEventListener('DOMContentLoaded',()=>App.init());
</script>
</body>
</html>
